{% extends 'base.html' %}
{% load static %}

{% block content %}
    <div class="container">
        <h1>Welcome to Your Spotify Wrapped!</h1>
        <p>Explore your personalized music journey.</p>

        <!-- Stats Overview Section -->
        <div class="stats-overview">
            <h2>Your Stats Overview</h2>
            {% if wrapped_data %}
                <div class="overview-stats">
                    <div class="stat-item">
                        <h3>Total Listening Time</h3>
                        <p>{{ wrapped_data.listening_time_hours }} hours</p>
                    </div>
                    <div class="stat-item">
                        <h3>Top Genres</h3>
                        <ul>
                            {% for genre in wrapped_data.topGenres %}
                                <li>{{ genre.name }} ({{ genre.count }} listens)</li>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="stat-item">
                        <h3>Top Artists</h3>
                        <ul>
                            {% for artist in wrapped_data.topArtists %}
                                <li>{{ artist.name }} (Popularity: {{ artist.popularity }})</li>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="stat-item">
                        <h3>Top Tracks</h3>
                        <ul>
                            {% for track in wrapped_data.topTracks %}
                                <li>{{ track.name }} (Duration: {{ track.duration }}ms)</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            {% else %}
                <p>No wrapped data available for the selected time range.</p>
            {% endif %}
        </div>

        <!-- Time Range Selection Form -->
        <form action="{% url 'wrapped_artists' %}" method="get">
            <label for="time_range">Select Time Range:</label>
            <select name="time_range" id="time_range">
                <option value="short_term">Last 4 Weeks</option>
                <option value="medium_term">Last 6 Months</option>
                <option value="long_term">All Time</option>
            </select>
            <button type="submit">Discover Now</button>
        </form>
    </div>
{% endblock %}
