{% extends 'base.html' %}
{% load static %}

{% block title %}
    {{ page_title }}
{% endblock %}

{% block content %}
    <link rel="stylesheet" href="{% static 'css/tracks.css' %}">
    <div class="page-title">{{ page_title }}</div>
    <div class="section-subtitle">Here are your saved Spotify Wrapped data</div>

    {% if wraps %}
        <div class="card-container">
            {% for wrap in wraps %}
                <div class="card">
                    <div class="card-image-container">
                        <img src="{{ wrap.top_artists.0.image }}" class="card-image" alt="{{ wrap.top_artists.0.name }}">
                    </div>
                    <div class="card-content">
                        <h3>{{ wrap.user.username }}'s Spotify Wrapped</h3>
                        <p class="created-at">{{ wrap.created_at|date:"F j, Y" }}</p>
                        <a href="{% url 'saved_spotify_wrapped_profile' wrap.id %}" class="btn">View Details</a>

                        <!-- Delete button inside a form to handle the POST request -->
                        <form action="{% url 'delete_spotify_wrap' wrap.id %}" method="post" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger">Delete</button>
                        </form>

                        <!-- Post on Website Button -->
                    <a href="{% url 'post_wrap_to_website' wrap.id %}" class="share-button" style="background-color: #ff6600;" title="Post on Website">
                        <svg class="share-icon" viewBox="0 0 24 24">
                            <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"></path>
                            <line x1="12" y1="6" x2="12" y2="18"></line>
                            <line x1="6" y1="12" x2="18" y2="12"></line>
                        </svg>
                        Post on Website
                    </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-center">You have no saved Spotify Wrapped data.</p>
    {% endif %}
{% endblock %}
